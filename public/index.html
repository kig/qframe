<!DOCTYPE html>
<html>
    <head>
        <title>Hello Qframe!</title>
    </head>
    <body>
        <h1>Hello Qframe!</h1>
        <p>Now try pulling up the console for some API antics</p>
<pre>
var headers = {};
var get = async(path) => (await fetch(path, {headers})).json();
var post = async(path, body) => (await fetch(path, {method:'POST', headers, body: JSON.stringify(body)})).json();
var user = await post('/_/user/create', {email:'foo@bar', name: 'foo', password: 'barbeque'});
headers = await post('/_/user/authenticate', {email: 'foo@bar', password: 'barbeque', rememberme: true});
var userData = await post('/_/user/edit', {data: {avatar: "pirate", favouriteQuote: "Pinata Pirata!"}});
var userInfo = await get('/_/user/view');
var {id} = await post('/_/items/create', {name: "My wonderful item", wonderfulness: 9999});
var item = await get(`/_/items/view/${id}`);
await post('/_/items/edit', {id, data: {name: "My wonderful item", wonderfulness: 10000}})
var items = await get(`/_/items/list`);
await post('/_/items/delete', {id});
var logout = await post('/_/user/logout');
headers = await post('/_/user/authenticate', {email: 'foo@bar', password: 'barbeque', rememberme: true});
headers = await post('/_/user/authenticate', {email: 'foo@bar', password: 'barbeque', rememberme: true});
headers = await post('/_/user/authenticate', {email: 'foo@bar', password: 'barbeque', rememberme: true});
var sessions = await get('/_/user/sessions');
var logoutAll = await post('/_/user/logoutAll');
console.log(user, headers, userData, userInfo, item, items, logout, sessions, logoutAll);
</pre>
    </body>
</html>